-- +goose Up
ALTER TABLE projects ADD COLUMN tenant_id UUID NOT NULL DEFAULT '00000000-0000-0000-0000-000000000000';
ALTER TABLE tasks ADD COLUMN tenant_id UUID NOT NULL DEFAULT '00000000-0000-0000-0000-000000000000';
ALTER TABLE agents ADD COLUMN tenant_id UUID NOT NULL DEFAULT '00000000-0000-0000-0000-000000000000';
ALTER TABLE runs ADD COLUMN tenant_id UUID NOT NULL DEFAULT '00000000-0000-0000-0000-000000000000';
ALTER TABLE agent_events ADD COLUMN tenant_id UUID NOT NULL DEFAULT '00000000-0000-0000-0000-000000000000';
ALTER TABLE execution_plans ADD COLUMN tenant_id UUID NOT NULL DEFAULT '00000000-0000-0000-0000-000000000000';
ALTER TABLE agent_teams ADD COLUMN tenant_id UUID NOT NULL DEFAULT '00000000-0000-0000-0000-000000000000';

CREATE INDEX idx_projects_tenant ON projects (tenant_id);
CREATE INDEX idx_tasks_tenant ON tasks (tenant_id);
CREATE INDEX idx_agents_tenant ON agents (tenant_id);
CREATE INDEX idx_runs_tenant ON runs (tenant_id);

-- +goose Down
DROP INDEX IF EXISTS idx_runs_tenant;
DROP INDEX IF EXISTS idx_agents_tenant;
DROP INDEX IF EXISTS idx_tasks_tenant;
DROP INDEX IF EXISTS idx_projects_tenant;
ALTER TABLE agent_teams DROP COLUMN IF EXISTS tenant_id;
ALTER TABLE execution_plans DROP COLUMN IF EXISTS tenant_id;
ALTER TABLE agent_events DROP COLUMN IF EXISTS tenant_id;
ALTER TABLE runs DROP COLUMN IF EXISTS tenant_id;
ALTER TABLE agents DROP COLUMN IF EXISTS tenant_id;
ALTER TABLE tasks DROP COLUMN IF EXISTS tenant_id;
ALTER TABLE projects DROP COLUMN IF EXISTS tenant_id;
