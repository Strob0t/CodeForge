# CodeForge — Tech Stack

## Languages & Versions

| Language   | Version | Area of Use           |
|------------|---------|----------------------|
| Go         | 1.23    | Core Service         |
| Python     | 3.12    | AI Workers           |
| TypeScript | 5.x     | Frontend             |
| Node.js    | 22 LTS  | Frontend Build/Dev   |

## Linting & Formatting

### Python
- **Linter/Formatter:** [Ruff](https://docs.astral.sh/ruff/) (replaces flake8, isort, black)
- **Configuration:** `pyproject.toml` under `[tool.ruff]`
- **Rules:** pyflakes, pycodestyle, isort, pep8-naming, pyupgrade, bugbear, simplify
- **Line Length:** 120

### Go
- **Linter:** [golangci-lint](https://golangci-lint.run/) (Aggregator)
- **Configuration:** `.golangci.yml`
- **Active Linters:** errcheck, govet, staticcheck, unused, gosimple, gocritic, gofmt, goimports, misspell, prealloc, unconvert, unparam
- **Formatter:** gofmt + goimports

### TypeScript
- **Linter:** ESLint
- **Formatter:** Prettier
- **Configuration:** (will be created with frontend setup)

### Pre-commit Hooks
- **Configuration:** `.pre-commit-config.yaml`
- **Invocation:** `pre-commit run --all-files`
- Runs automatically on every `git commit`

## Package Management

| Language   | Tool       | Lockfile         | Config           |
|------------|------------|------------------|------------------|
| Python     | Poetry     | poetry.lock      | pyproject.toml   |
| Go         | Go Modules | go.sum           | go.mod           |
| TypeScript | npm        | package-lock.json| package.json     |

## Infrastructure

### Devcontainer
- **Base Image:** `mcr.microsoft.com/devcontainers/base:bookworm` (Debian 12)
- **Features:** Go, Python, Node.js, Docker-in-Docker, Git
- **Setup:** `.devcontainer/setup.sh` (automatic via postCreateCommand)

### Docker Compose (Dev Services)
- **litellm-proxy** (Port 4000) — LLM Routing & Multi-Provider Gateway (OpenAI-compatible API)
- **docs-mcp-server** (Port 6280) — Documentation indexing for LLM context
- **playwright-mcp** (Port 8001) — Browser automation / web scraping

### MCP Server
- Configuration: `.mcp.json`
- Automatically loaded via `enableAllProjectMcpServers: true`

## VS Code Extensions (in Devcontainer)

| Extension | Purpose |
|---|---|
| anthropic.claude-code | Claude Code CLI Integration |
| golang.go | Go Language Support |
| ms-python.python | Python Language Support |
| ms-python.vscode-pylance | Python Type Checking |
| dbaeumer.vscode-eslint | ESLint Integration |
| esbenp.prettier-vscode | Prettier Integration |
| bradlc.vscode-tailwindcss | Tailwind CSS IntelliSense |

## Planned Dependencies (not yet installed)

### Go Core Service
- HTTP Router (chi, fiber, or echo)
- WebSocket Library
- NATS/Redis Client
- Git/SVN Bindings

### Python Workers
- LiteLLM (Multi-Provider LLM Routing, also as Proxy Sidecar)
- LangGraph (Agent Orchestration)
- Redis/NATS Client

### Infrastructure Services
- LiteLLM Proxy (Docker Sidecar, Port 4000) — Central LLM Gateway
  - Image: `docker.litellm.ai/berriai/litellm:main-stable`
  - 127+ Providers, 6 Routing Strategies, Budget Management
  - Config: `litellm_config.yaml` (generated by Go Core)
  - Dependencies: Postgres (Spend Tracking), Redis (Caching, Rate Limiting)

### TypeScript Frontend
- SolidJS (reactive UI framework)
- Tailwind CSS
- WebSocket Client
