# CodeForge — Tech Stack

## Languages & Versions

| Language   | Version | Area of Use           |
|------------|---------|----------------------|
| Go         | 1.23    | Core Service         |
| Python     | 3.12    | AI Workers           |
| TypeScript | 5.x     | Frontend             |
| Node.js    | 22 LTS  | Frontend Build/Dev   |

## Linting & Formatting

### Python
- **Linter/Formatter:** [Ruff](https://docs.astral.sh/ruff/) (replaces flake8, isort, black)
- **Configuration:** `pyproject.toml` under `[tool.ruff]`
- **Rules:** pyflakes, pycodestyle, isort, pep8-naming, pyupgrade, bugbear, simplify
- **Line Length:** 120

### Go
- **Linter:** [golangci-lint](https://golangci-lint.run/) (Aggregator)
- **Configuration:** `.golangci.yml`
- **Active Linters:** errcheck, govet, staticcheck, unused, gosimple, gocritic, gofmt, goimports, misspell, prealloc, unconvert, unparam
- **Formatter:** gofmt + goimports

### TypeScript
- **Linter:** ESLint
- **Formatter:** Prettier
- **Configuration:** (will be created with frontend setup)

### Pre-commit Hooks
- **Configuration:** `.pre-commit-config.yaml`
- **Invocation:** `pre-commit run --all-files`
- Runs automatically on every `git commit`

## Package Management

| Language   | Tool       | Lockfile         | Config           |
|------------|------------|------------------|------------------|
| Python     | Poetry     | poetry.lock      | pyproject.toml   |
| Go         | Go Modules | go.sum           | go.mod           |
| TypeScript | npm        | package-lock.json| package.json     |

## Infrastructure

### Devcontainer
- **Base Image:** `mcr.microsoft.com/devcontainers/base:bookworm` (Debian 12)
- **Features:** Go, Python, Node.js, Docker-in-Docker, Git
- **Setup:** `.devcontainer/setup.sh` (automatic via postCreateCommand)

### Docker Compose (Dev Services)
- **docs-mcp-server** (Port 6280) — Documentation indexing for LLM context
- **playwright-mcp** (Port 8001) — Browser automation / web scraping
- **litellm-proxy** (Port 4000) — LLM Routing & Multi-Provider Gateway *(planned, not yet in docker-compose.yml)*

### MCP Server
- Configuration: `.mcp.json`
- Automatically loaded via `enableAllProjectMcpServers: true`

## VS Code Extensions (in Devcontainer)

| Extension | Purpose |
|---|---|
| anthropic.claude-code | Claude Code CLI Integration |
| golang.go | Go Language Support |
| ms-python.python | Python Language Support |
| ms-python.vscode-pylance | Python Type Checking |
| dbaeumer.vscode-eslint | ESLint Integration |
| esbenp.prettier-vscode | Prettier Integration |
| bradlc.vscode-tailwindcss | Tailwind CSS IntelliSense |

## Planned Dependencies (not yet installed)

### Go Core Service
- HTTP Router (chi, fiber, or echo)
- WebSocket Library (gorilla/websocket or nhooyr/websocket)
- NATS Client (nats.go)
- Redis Client (go-redis)
- Git Bindings (go-git)
- SVN Bindings (os/exec wrapper for svn CLI)

### Python Workers
- LiteLLM (client library for OpenAI-compatible API against LiteLLM Proxy)
- LangGraph (Agent Orchestration)
- NATS Client (nats-py)
- Redis Client (redis-py)
- Jinja2 (Prompt Templates)
- KeyBERT (Keyword Extraction for Retrieval)

### Agent Backend Integration (Priority 1)
- Goose (Rust, MCP-native, subprocess integration)
- OpenCode (Go, Client/Server, LSP-aware)
- Plandex (Go, Planning-First, Diff Sandbox)

### Infrastructure Services
- LiteLLM Proxy (Docker Sidecar, Port 4000) — Central LLM Gateway
  - Image: `docker.litellm.ai/berriai/litellm:main-stable`
  - 127+ Providers, 6 Routing Strategies, Budget Management
  - Config: `litellm_config.yaml` (generated by Go Core)
  - Dependencies: Postgres (Spend Tracking), Redis (Caching, Rate Limiting)

### TypeScript Frontend
- SolidJS (reactive UI framework)
- Tailwind CSS
- WebSocket Client
- solid-router (SPA routing)
